<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>AlfieVR - Stereo 3D Vision</title>
    <meta name="description" content="Stereo 3D Vision for Meta Quest 3">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="stereo_styles.css">
</head>
<body>
    <div id="status">Initializing...</div>
    <div id="fpsCounter">FPS: 0</div>
    <video id="stereoVideo" autoplay playsinline muted preload="none" style="display: none;"></video>
    <canvas id="leftCanvas" style="display: none;"></canvas>
    <canvas id="rightCanvas" style="display: none;"></canvas>
    <img id="preview" class="hidden" alt="Stereo preview">
    
    <!-- Stereo adjustment controls -->
    <div id="controls">
        <h3>üéØ Stereo Adjustments</h3>
        <div class="control-row">
            <label>Vertical Offset</label>
            <input type="range" id="verticalOffset" min="-1" max="1" step="0.01" value="0">
            <span class="value" id="verticalOffsetVal">0.00</span>
        </div>
        <div class="control-row">
            <label>IPD Offset</label>
            <input type="range" id="ipdOffset" min="-0.05" max="0.05" step="0.001" value="0">
            <span class="value" id="ipdOffsetVal">0.000</span>
        </div>
        <div class="control-row">
            <label>Screen Distance</label>
            <input type="range" id="screenDistance" min="0.5" max="5" step="0.1" value="2">
            <span class="value" id="screenDistanceVal">2.0</span>
        </div>
        <div class="control-row">
            <label>Screen Scale</label>
            <input type="range" id="screenScale" min="0.5" max="3" step="0.1" value="1.5">
            <span class="value" id="screenScaleVal">1.5</span>
        </div>
        <div class="control-row">
            <button class="control-btn" onclick="resetSettings()">Reset</button>
            <button class="control-btn" onclick="saveSettings()">Save</button>
        </div>
        <div class="control-row" style="margin-top: 15px; border-top: 1px solid #444; padding-top: 10px;">
            <label>Controller WS</label>
            <span id="controllerWSStatus" style="color: #f44336;">‚óè</span>
            <span class="value" id="controllerWSStatusText">Disconnected</span>
        </div>
    </div>
    
    <div id="info">
        Put on your Meta Quest 3 and click "Enter VR" for immersive 3D vision<br>
        Use thumbsticks in VR: Left stick = vertical, Right stick = IPD | Triggers = distance<br>
        Controller tracking streams to robot arms via WebSocket
    </div>
    <button id="vrButton" disabled>ü•Ω Enter VR</button>
    <button id="certButton" style="position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: #f39c12; color: #000; border: none; padding: 12px 24px; font-size: 14px; border-radius: 8px; cursor: pointer; z-index: 1000; display: none;">üîê Accept Stereo Stream Certificate</button>
    
    <!-- Debug overlay for VR (visible in headset) -->
    <div id="vrDebug" style="position: fixed; top: 10px; left: 10px; background: rgba(0,0,0,0.8); color: #0f0; padding: 10px; font-family: monospace; font-size: 12px; z-index: 10000; display: none; max-width: 400px; pointer-events: none;">
        VR Debug Info
    </div>

    
    <script type="module" src="stereo_vr.js"></script>
</body>
</html>